[{"content":"Why Remark42 Because it is lightweight and privacy-focused. The theme that I am using for this website, Stack, built on Hugo Framework, provides a bunch of comments integrations. Remark42 was one of them. That was it, I wanted ease of integration and something non-invasive.\nI considered using Cactus, because it uses Matrix - highly recommend you check it out. But then, when I finally set everything up with the quick start, it didn\u0026rsquo;t look that good. Glad I explored it, though. this way I learned about the existence of Matrix\u0026hellip; Decentralised communication! Are you kidding me? That sounds awesome!\nI digress, anyway, Remark42! It\u0026rsquo;s promissing, it has a bunch of neat features and integrations. The cookies that it stores are pretty low key, everything is hashed and ecrypted, and minimal information is used\u0026hellip; At least that is what they say\u0026hellip; But the code\u0026rsquo;s open-source, so you can check it out.\nInitial setup It is very easy to get it up-and-running, because with the Stack theme I didn\u0026rsquo;t even have to integrate the frontend. I\u0026rsquo;m not going to guide you through the same steps they have on their page. Needless to say that, if you are running the backend on a machine other than your pc, you might have to adapt your interpretation when it comes to referencing the host backend.\nBackend I went with the docker solution, find the steps here. Because I am running this in my home server, I had to expose a port on the configuration, and kept it simple with only the anonymmous authentication on, example of the docker-compose.yml:\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 version: \u0026#34;2\u0026#34; services: remark: # remove the next line in case you want to use this Docker Compose file separately # as otherwise it would complain for absence of Dockerfile build: . image: umputun/remark42:latest container_name: \u0026#34;remark42\u0026#34; hostname: \u0026#34;remark42\u0026#34; restart: always logging: driver: json-file options: max-size: \u0026#34;10m\u0026#34; max-file: \u0026#34;5\u0026#34; # uncomment to expose directly (no proxy) ports: - \u0026#34;5005:8080\u0026#34; # host:container environment: - REMARK_URL=http://127.0.0.1 # localhost - SITE=davidsales.pt # you can set any value here - SECRET=abcd12345 # make sure to set a strong secret for the JWT tokens - ALLOWED_HOSTS=http://localhost:1313 # available client auth # -\u0026gt; anon - AUTH_ANON=true volumes: - ./var:/srv/var As you can see, there are still some comments from their example yaml file. You don\u0026rsquo;t really need to set ALLOWED_HOSTS at this point, but if you do, make sure to set it as the website\u0026rsquo;s url where you\u0026rsquo;re embedding remark42 (the hugo cli launches the local website on port 1313). This var will later on be important, to add an extra layer of security, as it will only allow embedding on the websites defined there (you can set multiple, comma-separated, values).\nYou should be able to access the demo by typing http://127.0.0.1:5005/web/. Here\u0026rsquo;s an example from my page: Frontend As I mentioned previously, I am using a theme from the Hugo Framework which allows me to easily embbed remark42. So I only had to change the params.toml to enable commenting, and also match the backend configuration:\n1 2 3 4 5 6 7 8 9 10 [comments] enabled = true provider = \u0026#34;remark42\u0026#34; (...) [comments.remark42] host = \u0026#34;http://127.0.0.1:5005\u0026#34; site = \u0026#34;davidsales.pt\u0026#34; locale = \u0026#34;pt-pt\u0026#34; I was running Remark42\u0026rsquo;s backend on another machine, so I actually changed the host to that machine\u0026rsquo;s ip plus the 5005 port. Actually, we\u0026rsquo;ll get into that next.\nThat was it! \u0026hellip; Not quite Of course that wasn\u0026rsquo;t everything that we needed to do to have it fully working, we still need to somehow be able to connect to the backend, when loading our website (this case davidsales.pt). But, after you setup external access, you can just explore the other wonderful features that Remark42 has, such as: administration, user authentication with multiple providers, notifications, \u0026hellip;\nSetup external access to the backend This part is totally up to you. We need to somehow be able to access this from the WWW, and I am just going to tell you what I did.\nI have a machine with Apache2 serving as a reverse proxy, the connections are forwarded to it and it routes them to the appropriate place. I have setup certificates with certbot on this machine, for my domain. And I created a subdomain to accommodate this backend. If you check this page\u0026rsquo;s configuration, you might find the link https://remark42.davidsales.pt somewhere. And you should only be able to access some pages (hopefully üòÜ).\nI\u0026rsquo;m not going into detail about this, as it will increase this post\u0026rsquo;s size by a lot. Comment below or e-mail me if you\u0026rsquo;d like to know how I set all this networking part out.\nWith this last paragraph you can already assume that I am reverse proxying requests from my subdomain to the local container directly, and that the connection is secured (as it uses HTTPS). Just make sure anyone on the internet can access:\n/web/privacy.html, as it contains the privacy statement /web/markdown-help.html, that helps users with markdown /web/iframe.html, that actually lets you embbed remark42 in the website Any css, svg or jpeg file under /web/ As well as everything under /auth and /api, to allow for requests to the backend I think you can lock the rest! Now, don\u0026rsquo;t forget to set the secret environment variable if you haven\u0026rsquo;t, on the backend. Use some online service if you have to generate it, example.\nAfter you can access it externally, make sure to change the REMARK_URL on the backend config to the frontfacing url, and from the frontend that is embbedding it as well. In my case it was https://remark42.davidsales.pt.\nFun part begins: Customizing it! Now you can setup anything you want, that remark42 provides. I just setup Github, Google and Microsoft. Anonymmous authentication was already setup from the beginning. Here\u0026rsquo;s an example of what my yaml file looks like at this point:\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 version: \u0026#34;2\u0026#34; services: remark: build: . image: umputun/remark42:latest container_name: \u0026#34;remark42\u0026#34; hostname: \u0026#34;remark42\u0026#34; restart: always logging: driver: json-file options: max-size: \u0026#34;10m\u0026#34; max-file: \u0026#34;5\u0026#34; ports: - \u0026#34;5005:8080\u0026#34; environment: - REMARK_URL=https://remark42.davidsales.pt - SECRET=[redacted] - SITE=davidsales.pt - ALLOWED_HOSTS=https://remark42.davidsales.pt,https://davidsales.pt,http://localhost:1313 - ADMIN_SHARED_ID=[redacted] - ADMIN_SHARED_EMAIL=[redacted] # available client auth # -\u0026gt; anon - AUTH_ANON=true # -\u0026gt; github - AUTH_GITHUB_CID=[redacted] - AUTH_GITHUB_CSEC=[redacted] # -\u0026gt; google - AUTH_GOOGLE_CID=[redacted] - AUTH_GOOGLE_CSEC=[redacted] # -\u0026gt; Microsoft - AUTH_MICROSOFT_CID=[redacted] - AUTH_MICROSOFT_CSEC=[redacted] volumes: - ./var:/srv/var Once you\u0026rsquo;re ready, you can start thinking about publishing this. But before that, I think you should really consider to at least try being GDPR compliant. I don\u0026rsquo;t know if I fully am, but I tried by adding a cookie consent modal thingy üòÜ\nCookie Consent modal If you search for some integration in Hugo, you might find this one. It\u0026rsquo;s okay, but to be honest it looked ugly. So I searched a little bit more and stumbled upon this one, doesn\u0026rsquo;t it look clean?\nIt is very simple to set up, it took a little elbow grease to properly set everything, but it was really easy to integrate with the theme I am using, even though it is not officially supported! I might contribute to stack with this addition üòä This framework is really cool!\nSetup the consent modal I followed the steps here went with the CDN hosted version, as it seemed like the simplest one. To actually add it to the pages, and here comes the easibility of using Stack and Hugo, I just created the files that I had to overwrite, and changed where I wanted. It\u0026rsquo;s that simple, anything that you don\u0026rsquo;t explicitly add to the theme, will be loaded from it\u0026rsquo;s defaults. To be fair, I don\u0026rsquo;t know if this is Hugo\u0026rsquo;s feature or Stack\u0026rsquo;s, but it is certainly a bit of both.\nWe have to add the:\nStylesheet I created /layouts/partials/head/custom.html and just added the link tag needed Modal information setup on a script I created /static/js/cookieconsent-config.js with my configuration, which is just text with the information I want to display there You can find an example on the steps that I linked in this section Script tag for the modal (to display it) As I wanted it to be in the footer, I created /layouts/partials/footer/custom.html and added the script tag needed Referencing it in the src attribute with {{ .Site.BaseURL }}js/cookieconsent-config.js, because this is how we can reference the contents of the static folder I also wanted to change it\u0026rsquo;s style to match the theme toggle that Stack has, so I copied the /ts/colorScheme.ts from Stack\u0026rsquo;s github, and changed it accordingly. CookieConsent mentions how we can toggle the dark theme, so I just added the respective lines on the code that toggles the theme, and retrieved the cookie that stores the theme preference on startup (so the correct theme is applied when it is loaded). You can check the file on the repo of this website if you are interested.\nApart from all of these changes to accomodate the cookie consent on my site, I wasn\u0026rsquo;t fully comfortable yet with the privacy policy not being linked anywhere. So I also copied the full footer file to be able to edit it, to /layouts/partials/footer/footer.html and added a link to the privacy policy.\nHere\u0026rsquo;s how it ended up looking. Neat, right?\nQuirks Remark42 deleteme This works from the standpoint of the user. If they want to delete all their user data, they can click on themselves, after signing in, and click on the respective button. It\u0026rsquo;ll open a new tab to send an e-mail, but the URL linked isn\u0026rsquo;t the proper one. So the admin can\u0026rsquo;t really process the request with one click. Instead:\nThey have to copy the token id generated They have to be signed in with their admin account Make a proper GET /api/v1/admin/deleteme?token={token} Replace the {token} with the one from the email Add the headers according to their session cookies X-XSRF-TOKEN: {XSRF-TOKEN} Cookie: JWT-{JWT} Make the request Remark42 to match the theme This is done by default, as Stack officially supports Remark42. But I find that the sorting box text is not that readable when the theme is Dark. I have had some trouble in trying to change it, and gave up.\nFinal words This was quite a lot of work, mostly in the networking + security part, because I want to have something reliable. The rest was quite straightforward, there were just a lot of new concepts and things to explore. Was a really fun thing to investigate, and it opened some new doors. Leave a comment letting me now what you thought, or send me an e-mail!\n","date":"2024-11-05T00:34:00Z","image":"https://davidsales.pt/p/comments-are-live/blabla-white_hu9711441720230847780.png","permalink":"https://davidsales.pt/p/comments-are-live/","title":"Comments are live and cookies are freshly baked!"},{"content":"TL;DR: Using Youtube, and this website as well, to try and expose myself more. Will try to transition to sharing on social media, as well. So, in the end, I can try to overcome at least a little bit of this fear. You can find a link to my channel at the end of this post.\nYikes, I have AuDHD Yeap, I have a mix of the two. Got a late diagnosis and I am finding things about myself everyday. I don\u0026rsquo;t want to go to such depths, I just wanted to share this with you, and to make a little more sense of the \u0026ldquo;anxiety of being perceived\u0026rdquo; part.\nHere\u0026rsquo;s a fart sound to cut the seriousness\nWhy youtube Well, it\u0026rsquo;s the least friction path to me, or at least it feels that way. I\u0026rsquo;m going to be posting there, and only sharing it here. This way, I\u0026rsquo;m consciously exposing myself without explicitly sharing with people that know me/perceive me on a daily basis.\nThat is, without sharing it on other places. When I start to feel comfortable enough, I will start being \u0026ldquo;louder\u0026rdquo; with sharing this. Perhaps posting on my other social media\u0026hellip; It might not seem like a lot, but I am already feeling a tad anxious about posting all of this (as of now I haven\u0026rsquo;t posted this website yet).\nbig sidetrack: I was going to put the \u0026ldquo;it\u0026rsquo;s not much, but it\u0026rsquo;s honest work\u0026rdquo; meme, because of the reference on the last paragraph\u0026hellip; But I just found out he died, what the actual fuck, I\u0026rsquo;m shook\u0026hellip; R.I.P.\nMy first video The first full-song that I properly learned on bass. Well, proper is a stretch, it isn\u0026rsquo;t perfect, I still can\u0026rsquo;t land the last harmonic. It\u0026rsquo;s one of my favourite songs by Jaco Pastorius, I can get into that on another post. But here it is.\nWrapping it up Weird sidetrack, still shook. Anyway, expect music-related stuff, because that is one of my hobbies. I play guitar and bass, and am attempting to arrange a setup to start to learn how to play drums. This website, in a way, is also a way of exposing myself, and trying to conquer this fear. If you have anything you want so say, please let me know, I would love to read your thoughts üôÇ\n","date":"2024-10-29T00:00:00Z","image":"https://davidsales.pt/p/experimenting-with-youtube/wow-very-deep_hu14404271932175433108.jpg","permalink":"https://davidsales.pt/p/experimenting-with-youtube/","title":"Experimenting with Youtube"},{"content":"Hi everyone, my name\u0026rsquo;s David and this is my first post on the new website! I\u0026rsquo;ll be updating it with whatever I want to share with the world.\nI\u0026rsquo;m sick of social media and the way the algorithms prioritize the \u0026ldquo;for you\u0026rdquo; concept, and I also don\u0026rsquo;t want to feed it. I\u0026rsquo;m doing this to keep a public journal for myself and, if you want, you can tag along üôÇ\nI want to bring back personal blogs like in the era before the social media boom!!!!!\nI\u0026rsquo;m employed within the computer science sphere, so I will also share my personal endeavors in that context. An overview of this website will soon follow.\nI will try to tag everything properly, it probably won\u0026rsquo;t be perfect right away. Just know that you can also e-mail me about anything!\nThis website will soon have a comments feature! I will work on it as fast as possible üèÉ‚Äç‚ôÇÔ∏èüí®\n","date":"2024-10-29T00:00:00Z","image":"https://davidsales.pt/p/hello-world/wow-very-art_hu46131453038563405.jpg","permalink":"https://davidsales.pt/p/hello-world/","title":"My third attempt at a website"}]